package com.example.exploitation;

import android.os.Build;
import android.os.Bundle;
import androidx.appcompat.app.AppCompatActivity;

import android.view.View;
import android.widget.TextView;

import com.example.exploitation.R;
import com.google.android.material.button.MaterialButton;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.io.IOException;

public class deviceinfo extends AppCompatActivity {
    TextView textView;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_deviceinfo);

        textView=findViewById(R.id.textDeviceID);


        StringBuilder deviceInfo = new StringBuilder();
        deviceInfo.append("Device Model: ").append(Build.MODEL).append("\n");
        deviceInfo.append("Manufacturer: ").append(Build.MANUFACTURER).append("\n");
        deviceInfo.append("Brand: ").append(Build.BRAND).append("\n");
        deviceInfo.append("Device: ").append(Build.DEVICE).append("\n");
        deviceInfo.append("Product: ").append(Build.PRODUCT).append("\n");
        deviceInfo.append("Hardware: ").append(Build.HARDWARE).append("\n");
        deviceInfo.append("Board: ").append(Build.BOARD).append("\n");
        deviceInfo.append("Display: ").append(Build.DISPLAY).append("\n");
        deviceInfo.append("Serial: ").append(Build.SERIAL).append("\n");
        deviceInfo.append("Android Version: ").append(Build.VERSION.RELEASE).append("\n");
        deviceInfo.append("SDK Version: ").append(Build.VERSION.SDK_INT).append("\n");

        // RAM information
        deviceInfo.append("Total RAM: ").append(getTotalRAM()).append(" GB\n");

        // Storage (ROM) information
        deviceInfo.append("Total Internal Storage: ").append(getTotalInternalStorage()).append(" GB\n");

        // CPU information
        deviceInfo.append("CPU Architecture: ").append(System.getProperty("os.arch")).append("\n");
        deviceInfo.append("Number of CPU Cores: ").append(Runtime.getRuntime().availableProcessors()).append("\n");

        // GPU information
        deviceInfo.append("GPU Vendor: ").append(getGpuVendor()).append("\n");

        // Additional information available on newer Android versions
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {
            deviceInfo.append("Security Patch: ").append(Build.VERSION.SECURITY_PATCH).append("\n");
        }

        // Set the device information to the TextView
        textView.setText(deviceInfo.toString());
    }

    private String getTotalRAM() {
        String path = "/proc/meminfo";
        String totalRAM = "N/A";
        try {
            BufferedReader br = new BufferedReader(new FileReader(new File(path)));
            String line;
            while ((line = br.readLine()) != null) {
                if (line.contains("MemTotal")) {
                    String[] parts = line.split("\\s+");
                    totalRAM = String.format("%.2f", Float.parseFloat(parts[1]) / (1024 * 1024)); // Convert to GB
                    break;
                }
            }
            br.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return totalRAM;
    }

    private String getTotalInternalStorage() {
        File path = getFilesDir();
        return String.format("%.2f", (float) path.getTotalSpace() / (1024 * 1024 * 1024)); // Convert to GB
    }

    private String getGpuVendor() {
        String[] supportedGpuVendors = {"Adreno", "Mali", "PowerVR"};
        String gpuInfo = Build.FINGERPRINT;

        for (String vendor : supportedGpuVendors) {
            if (gpuInfo.contains(vendor)) {
                return vendor;
            }
        }

        return "Unknown";
    }


}
